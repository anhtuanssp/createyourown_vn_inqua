!function(t,o,e,i){"use strick";CP.DisplayImgController=function(){this.view=null,this.model=null},CP.DisplayImgController.prototype.init=function(){this.view=new CP.DisplayImgModuleView,this.view.init(),this.model=new CP.DisplayImgModuleModel,this.model.init(),this.view.render([this.model.CLASS,this.model.ID]),this.bindEvent()},CP.DisplayImgController.prototype.bindEvent=function(){MYLIB.eventManager.subscribe(this,MYLIB.eventNames.event_display_img,"addDisplayImageUploadHandle"),this.view.bindEvent(this)},CP.DisplayImgController.prototype.renderImageHandle=function(o){var e=t(o.target);if(e.attr("src")!==i){var n=e.attr("src");MYLIB.eventManager.fireEvent(this,MYLIB.eventNames.event_upload_from_computer,n)}},CP.DisplayImgController.prototype.addDisplayImageUploadHandle=function(t){var o=t.data;this.view.renderItem(o)},MYLIB.mixin(CP.DisplayImgController,MYLIB.Event.ObserverMixin)}(jQuery,window,document),CP.DisplayImgModule=function(){this.controller=null},CP.DisplayImgModule.prototype.init=function(){this.controller=new CP.DisplayImgController,this.controller.init()},MYLIB.mixin(CP.DisplayImgModule,MYLIB.Event.ObserverMixin),function(t,o,e,i){CP.DisplayImgModuleModel=function(){this.ID="display-img-module",this.CLASS="display-img-module",this.data={}},CP.DisplayImgModuleModel.prototype.init=function(){return!0},MYLIB.mixin(CP.DisplayImgModuleModel,MYLIB.Event.ObserverMixin)}(jQuery,window,document),function(t,o,e,i){CP.DisplayImgModuleView=function(){this.html="",this.$el=null,this.$loading=null,this.controller=null,this.init=function(){this.html='<div style="position:relative" class="table-responsive {0}" id="{1}"><table class="table table-bordered"><tbody><tr></tr></tbody></table></div>'}},CP.DisplayImgModuleView.prototype.style=function(){this.$el.css({})},CP.DisplayImgModuleView.prototype.loading=function(){var o='<img src="imgs/theme/loader.gif" />';this.$loading=t(o),this.$loading.css({position:"absolute",top:"0"}),this.$el.append(this.$loading)},CP.DisplayImgModuleView.prototype.detachLoading=function(){this.$loading.remove()},CP.DisplayImgModuleView.prototype.render=function(o){if(!t.isArray(o))throw"Data render must be array";this.html=this.html.format(o[0],o[1]),this.$el=t(this.html),this.style()},CP.DisplayImgModuleView.prototype.renderItem=function(o){this.loading();var e=t("<td></td>"),i='<img src="{0}"/>';i=i.format(o),i=t(i),i.css({"max-width":"50px",cursor:"pointer"}),e.append(i),this.$el.find("tr").append(e),e.unbind("click touchstart").bind("click touchstart",this.controller.renderImageHandle);var n=this;setTimeout(function(){n.detachLoading()},1e3)},CP.DisplayImgModuleView.prototype.getElement=function(){return this.$el},CP.DisplayImgModuleView.prototype.bindEvent=function(t){this.controller=t},MYLIB.mixin(CP.DisplayImgModuleView,MYLIB.Event.ObserverMixin)}(jQuery,window,document),function(t,o,e,i){"use strick";CP.EffectImgBtn=function(){this.html='<div class="upload-assets-img" style="margin: 5px 0px 5px 0px;"><div class="assets-img-button"><button type="button" class="btn btn-default choose-image-from-assets" style="width:100%;position:relative;padding:10px"><i class="fa fa-picture-o fa-2x" aria-hidden="true" style="position:absolute;left:5px;top:7px;color:#c9c9c9"></i> Chỉnh màu</button><br/></div></div>',this.$el=null,this.$btnUpload=null},CP.EffectImgBtn.prototype.init=function(){this.$el=t(this.html),this.$btnUpload=this.$el.find(".choose-image-from-assets"),this.bindEvent()},CP.EffectImgBtn.prototype.getElement=function(){return this.$el},CP.EffectImgBtn.prototype.bindEvent=function(){this.$btnUpload.unbind("click touchstart").bind("click touchstart",this.openEffectImgsHandle.bind(this))},CP.EffectImgBtn.prototype.openEffectImgsHandle=function(t){MYLIB.eventManager.fireEvent(this,MYLIB.eventNames.event_open_edit_imgs,!0)},MYLIB.mixin(CP.EffectImgBtn,MYLIB.Event.ObserverMixin)}(jQuery,window,document),function(t,o,e,i){"use strick";CP.TakeSnapshotBtn=function(){this.html='<div class="upload-assets-img" style="margin: 5px 0px 5px 0px;"><div class="assets-img-button"><button type="button" class="btn btn-default take-snapshot-btn" style="width:100%;position:relative;padding:10px"><i class="ion-ios-camera-outline size-48" aria-hidden="true" style="position:absolute;left:5px;top:-13px;color:#c9c9c9"></i> Say cheese</button><br/></div></div>',this.$el=null,this.$btnSnapshot=null},CP.TakeSnapshotBtn.prototype.init=function(){this.$el=t(this.html),this.$btnSnapshot=this.$el.find(".take-snapshot-btn"),this.bindEvent()},CP.TakeSnapshotBtn.prototype.getElement=function(){return this.$el},CP.TakeSnapshotBtn.prototype.bindEvent=function(){this.$btnSnapshot.unbind("click touchstart").bind("click touchstart",this.openSnapshotHandle.bind(this))},CP.TakeSnapshotBtn.prototype.openSnapshotHandle=function(t){MYLIB.eventManager.fireEvent(this,MYLIB.eventNames.event_open_snapshot,!0)}}(jQuery,window,document),function(t,o,e,i){"use strick";CP.UploadFromAssetModule=function(){this.html='<div data-step="7" data-intro="Chọn hình từ thư viện của chúng tôi" class="upload-assets-img" style="margin: 5px 0px 5px 0px;"><div class="assets-img-button"><button type="button" class="btn btn-default choose-image-from-assets" style="width:100%;position:relative;padding:10px"><i class="fa fa-tree fa-2x" aria-hidden="true" style="position:absolute;left:5px;top:7px;color:#ff00dd"></i> Hình & Pattern</button><br/></div></div>',this.$el=null,this.$btnUpload=null,this.assetsApplication=null},CP.UploadFromAssetModule.prototype.init=function(){this.$el=t(this.html),this.$btnUpload=this.$el.find(".choose-image-from-assets"),this.assetsApplication=new CP.PopupAssetsModule,this.bindEvent()},CP.UploadFromAssetModule.prototype.getElement=function(){return this.$el},CP.UploadFromAssetModule.prototype.bindEvent=function(){this.$btnUpload.unbind("click touchstart").bind("click touchstart",this.openPopupAssetsImagesHandler.bind(this))},CP.UploadFromAssetModule.prototype.openPopupAssetsImagesHandler=function(t){this.assetsApplication.firstRender?this.assetsApplication.show():(this.assetsApplication.init(),this.assetsApplication.show())},MYLIB.mixin(CP.UploadFromAssetModule,MYLIB.Event.ObserverMixin)}(jQuery,window,document),function(t,o,e,i){CP.UploadFromComputerController=function(){},CP.UploadFromComputerController.prototype.$el=null,CP.UploadFromComputerController.prototype.html='<div data-step="3" data-intro="Chọn hình từ máy tính" class="panel panel-default" id="{0}"><div class="panel-heading"><i class="ion-ios-upload size-18"></i> Upload ảnh từ máy tính</div></div>',CP.UploadFromComputerController.prototype.ID="upload-from-controller-wrapper",CP.UploadFromComputerController.prototype.formController=null,CP.UploadFromComputerController.prototype.init=function(){this.html=this.html.format(this.ID),this.$el=t(this.html),this.formController=new CP.UploadFromComputer_Form,this.formController.init(),this.renderLayout()},CP.UploadFromComputerController.prototype.getElement=function(){return this.$el},CP.UploadFromComputerController.prototype.renderLayout=function(){this.$el.append(this.formController.getElement())},MYLIB.mixin(CP.UploadFromComputerController,MYLIB.Event.ObserverMixin)}(jQuery,window,document),function(t,o,e,i){CP.UploadFromComputer_Form=function(){},CP.UploadFromComputer_Form.prototype.$el=null,CP.UploadFromComputer_Form.prototype.html='<div class="panel-body" id="{0}"><input type="file" accept="image/*" name="imageLoader" style="width:163px"/><br/></div>',CP.UploadFromComputer_Form.prototype.ID="upload-from-controller-form",CP.UploadFromComputer_Form.prototype.inputChooseFile=null,CP.UploadFromComputer_Form.prototype.init=function(){this.html=this.html.format(this.ID),this.$el=t(this.html),this.inputChooseFile=this.$el.find("input"),this.bindEvent()},CP.UploadFromComputer_Form.prototype.getElement=function(){return this.$el},CP.UploadFromComputer_Form.prototype.bindEvent=function(){this.inputChooseFile.unbind("change").bind("change",this,this.imageFileFromComputerHandle)},CP.UploadFromComputer_Form.prototype.imageFileFromComputerHandle=function(t){var o=t.data,e=new FileReader;e.onload=function(t){MYLIB.eventManager.fireEvent(o,MYLIB.eventNames.event_upload_from_computer,t.target.result)},e.readAsDataURL(t.target.files[0])},MYLIB.mixin(CP.UploadFromComputer_Form,MYLIB.Event.ObserverMixin)}(jQuery,window,document),function(t,o,e,i){"use strick";CP.UploadFromFacebookModule=function(){this.html='<div data-step="1" data-intro="Chọn hình từ facebook của các bạn" class="upload-facebook-img" style="margin: 5px 0px 5px 0px;"><div class="facebook-img-button"><button type="button" class="btn btn-default choose-image-from-facebook" style="width:100%;position:relative;padding:10px"><i class="fa fa-facebook-square fa-2x" aria-hidden="true" style="position:absolute;left:5px;top:7px;color:#3a5795"></i> Hình Facebook</button><br/></div></div>',this.$el=null,this.$btnFacebook=null,this.facebookApplication=null},CP.UploadFromFacebookModule.prototype.init=function(){this.$el=t(this.html),this.$btnFacebook=this.$el.find(".choose-image-from-facebook"),this.facebookApplication=new CP.PopupFacebookModule,this.bindEvent()},CP.UploadFromFacebookModule.prototype.getElement=function(){return this.$el},CP.UploadFromFacebookModule.prototype.bindEvent=function(){this.$btnFacebook.unbind("click touchstart").bind("click touchstart",this,this.openPopupFacebookImagesHandler)},CP.UploadFromFacebookModule.prototype.openPopupFacebookImagesHandler=function(t){var o=t.data,e=CP.SingletonUser.getInstance();e.getFacebook();MYLIB.LOADING(),e.checkFacebookObj(function(t){MYLIB.REMOVE_LOADING(function(){o.initFacebookApplication()})},function(){e.loginFacebook(function(){MYLIB.REMOVE_LOADING(function(){o.initFacebookApplication()})})},function(){e.loginFacebook(function(){MYLIB.REMOVE_LOADING(function(){o.initFacebookApplication()})})})},CP.UploadFromFacebookModule.prototype.initFacebookApplication=function(){this.facebookApplication.firstRender?this.facebookApplication.show():(this.facebookApplication.init(),this.facebookApplication.show())},MYLIB.mixin(CP.UploadFromFacebookModule,MYLIB.Event.ObserverMixin)}(jQuery,window,document);